{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///E:/kuafor/app/api/appointments/track/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const searchParams = request.nextUrl.searchParams;\r\n    const code = searchParams.get(\"code\");\r\n\r\n    if (!code) {\r\n      return NextResponse.json(\r\n        { error: \"Takip kodu gereklidir\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const appointment = await prisma.appointment.findUnique({\r\n      where: { code },\r\n      include: {\r\n        appointment_services: {\r\n          include: {\r\n            service: true,\r\n          },\r\n        },\r\n        assigned_staff: {\r\n          select: {\r\n            name: true,\r\n            phone: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    if (!appointment) {\r\n      return NextResponse.json(\r\n        { error: \"Randevu bulunamadı. Lütfen takip kodunuzu kontrol edin.\" },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    return NextResponse.json({ appointment });\r\n  } catch (error) {\r\n    console.error(\"Appointment tracking error:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Randevu sorgulanırken bir hata oluştu\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,IAAI,6IAAY;AAExB,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QACjD,MAAM,OAAO,aAAa,GAAG,CAAC;QAE9B,IAAI,CAAC,MAAM;YACT,OAAO,+PAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAwB,GACjC;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,cAAc,MAAM,OAAO,WAAW,CAAC,UAAU,CAAC;YACtD,OAAO;gBAAE;YAAK;YACd,SAAS;gBACP,sBAAsB;oBACpB,SAAS;wBACP,SAAS;oBACX;gBACF;gBACA,gBAAgB;oBACd,QAAQ;wBACN,MAAM;wBACN,OAAO;oBACT;gBACF;YACF;QACF;QAEA,IAAI,CAAC,aAAa;YAChB,OAAO,+PAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0D,GACnE;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,+PAAY,CAAC,IAAI,CAAC;YAAE;QAAY;IACzC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,+PAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAwC,GACjD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}